> # ApsnyTravelCapsuleOS - Operations Manual

**Version:** 1.0
**Date:** December 2, 2025

---

## 1. Introduction

This manual provides a comprehensive guide for the day-to-day operations, maintenance, and troubleshooting of the ApsnyTravelCapsuleOS application. It is intended for system administrators, DevOps engineers, and developers responsible for the application.

---

## 2. System Architecture

- **Frontend:** Static React application served by a web server (e.g., Nginx, Vercel).
- **Data Layer:** Pre-compiled JSON files (`capsules.json`, `search-index.json`, etc.).
- **Deployment:** Can be deployed as a static site or a Docker container.

---

## 3. Content Management

### 3.1. Content Workflow

1.  **Add/Edit Capsules:** Content is managed in a separate Git repository (`ApsnyTravelCatalog`).
2.  **Compile Content:** A script (to be created) will pull the latest content, validate it, and compile it into `capsules.json`.
3.  **Build & Deploy:** The application is rebuilt and deployed with the updated content.

### 3.2. Content Validation

Use the `validate-capsules.py` script to check the integrity of the content:

```bash
python3 scripts/validate-capsules.py
```

---

## 4. Deployment & Rollbacks

### 4.1. Deployment

Follow the instructions in `DEPLOYMENT.md` for deploying the application.

### 4.2. Rollbacks

- **Vercel/Netlify:** Use the provider's dashboard to instantly roll back to a previous deployment.
- **Docker:** Stop the current container and start a container with the previous image tag.

---

## 5. Monitoring & Logging

### 5.1. Application Logs

- **Client-side:** The application uses a structured logger (`logger.ts`). Logs can be viewed in the browser console.
- **Server-side:** If using Nginx, access logs are located at `/var/log/nginx/apsnytravel_access.log` and error logs at `/var/log/nginx/apsnytravel_error.log`.

### 5.2. Performance Monitoring

Use the `performance-audit.py` script to analyze the application's performance:

```bash
python3 scripts/performance-audit.py
```

### 5.3. Uptime Monitoring

Use a third-party service (e.g., UptimeRobot, Pingdom) to monitor the application's uptime.

---

## 6. Security

### 6.1. Security Audits

Regularly audit dependencies for vulnerabilities:

```bash
pnpm audit
```

### 6.2. Security Headers

Ensure that all security headers are correctly configured as described in `SECURITY.md`.

### 6.3. Incident Response

1.  **Identify the issue:** Analyze logs and monitoring data to identify the root cause.
2.  **Contain the issue:** If necessary, take the application offline or roll back to a previous version.
3.  **Resolve the issue:** Apply a fix and deploy the updated application.
4.  **Communicate:** Inform users of the issue and the resolution.

---

## 7. Backup & Recovery

### 7.1. Code

- The application code is backed up via the Git repository.
- Regularly push changes to a remote repository.

### 7.2. Content

- The content is backed up via the `ApsnyTravelCatalog` Git repository.
- Regularly push changes to a remote repository.

### 7.3. Recovery

1.  **Clone the repositories:** Clone the application and content repositories.
2.  **Install dependencies:** Run `pnpm install`.
3.  **Build the application:** Run `pnpm build`.
4.  **Deploy:** Deploy the application to your hosting provider.

---

## 8. Troubleshooting

### 8.1. Build Failures

- **Check dependencies:** Ensure all dependencies are installed correctly.
- **Check Node.js version:** Ensure you are using a compatible version of Node.js.
- **Check for syntax errors:** Review the build logs for any syntax errors.

### 8.2. Content Issues

- **Run validation script:** Use `validate-capsules.py` to identify content issues.
- **Check JSON format:** Ensure that `capsules.json` is valid JSON.

### 8.3. Deployment Issues

- **Check environment variables:** Ensure all required environment variables are set.
- **Check build output:** Verify that the `dist/public` directory contains the built application.
- **Check server logs:** Review the server logs for any errors.

---

**Generated by:** Manus AI
