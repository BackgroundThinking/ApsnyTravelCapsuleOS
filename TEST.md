# ApsnyTravelCapsuleOS - Testing Guide

**Version:** 1.0
**Date:** December 2, 2025

---

## Overview

This document describes the testing strategy and how to run tests for ApsnyTravelCapsuleOS.

## Test Structure

Tests are organized in the `client/src/__tests__/` directory and follow the naming convention `*.test.ts` or `*.test.tsx`.

### Test Files

1. **lib.data.test.ts** - Tests for the data layer and capsule fetching
2. **lib.search.test.ts** - Tests for the search module and indexing

## Running Tests

### Install Test Dependencies

First, ensure all dependencies are installed:

```bash
pnpm install
```

### Run All Tests

```bash
pnpm test
```

### Run Tests in Watch Mode

```bash
pnpm test:watch
```

### Run Tests with Coverage

```bash
pnpm test:coverage
```

### Run Specific Test File

```bash
pnpm test lib.data.test.ts
```

## Test Coverage

The test suite covers the following areas:

### Data Layer Tests

- ✅ Fetching all capsules
- ✅ Validating capsule schema
- ✅ Checking slug uniqueness
- ✅ Checking ID uniqueness
- ✅ Finding capsule by slug
- ✅ Handling non-existent slugs
- ✅ SEO metadata completeness
- ✅ Geospatial data validity
- ✅ Content availability

### Search Module Tests

- ✅ Loading search index
- ✅ Searching by title
- ✅ Searching by keywords
- ✅ Handling short queries
- ✅ Filtering by type
- ✅ Filtering by region
- ✅ Result relevance sorting

## Adding New Tests

To add new tests, create a new file in `client/src/__tests__/` with the `.test.ts` or `.test.tsx` extension.

### Example Test

```typescript
import { describe, it, expect } from "vitest";

describe("My Feature", () => {
  it("should do something", () => {
    expect(true).toBe(true);
  });
});
```

## Continuous Integration

Tests should be run automatically in CI/CD pipelines before deployment. Add the following to your CI configuration:

```yaml
- name: Run Tests
  run: pnpm test
```

## Future Test Improvements

- Add component tests with React Testing Library
- Add E2E tests with Playwright or Cypress
- Increase coverage to 80%+
- Add performance benchmarks
- Add accessibility tests

---

**Generated by:** Manus AI
